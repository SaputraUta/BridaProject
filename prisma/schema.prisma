generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url  	= env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model User_Cust {
  id String @id @default(cuid())

  email        String @unique
  username String 
  passwordHash String
}

model User_Prov {
  id String @id @default(cuid())

  email        String @unique
  nama_perusahaan String 
  passwordHash String
}

model User_Admin {
  id String @id @default(cuid())

  email        String @unique
  passwordHash String
  //relation
  newsonadmin News[]
}

model Venue {
  id String @id @default(cuid())
  nama_venue String
  gambar_venue String
  alamat_venue String
  link_maps String
  penanggung_jawab String
  city_Id String
  city_R   City @relation(fields: [city_Id], references: [id])
  //relation
  Event EventonVenue[]
  roomonvenue Room[]
}

model Event {
  id String @id @default(cuid())
  category_event String
  gambar_event String
  desc_event String
  sop String
  alur_perizinan String
  kondisional String
  template_surat String
  //relation
  newsonevent News[]
  Venue EventonVenue[]
}

model EventonVenue{
  event_id String
  venue_id String
  //relation
  Event Event @relation(fields: [event_id], references: [id])
  Venue Venue @relation(fields: [venue_id], references: [id])

  @@id([venue_id, event_id])
}

model City {
  id String @id @default(cuid())
  nama_city String
  //relation
  venueoncity Venue[]
}

model Room {
  id String @id @default(cuid())
  nama_room String
  gambar_room String
  harga_room Int
  kapasitas String
  status Boolean @default(false)
  desc_room String
  venue_Id String
  venue_R   Venue @relation(fields: [venue_Id], references: [id])
  //relation
  transkasionroom Transaksi[]
}

model News {
  id String @id @default(cuid())
  judul_news String
  gambar_news String
  isi_berita String
  tgl_berita DateTime @default(now())
  admin_Id String
  admin_R   User_Admin @relation(fields: [admin_Id], references: [id])
  event_Id String
  event_R   Event @relation(fields: [event_Id], references: [id])
  //relation
  
}

model Transaksi{
   id String @id @default(cuid())
   status Boolean @default(false)
   tgl_transaksi DateTime @default(now())
   metode Metode
   total Int
   room_Id String
   room_R   Room @relation(fields: [room_Id], references: [id])
}

enum Metode{
  Bank1
  Bank2
  Bank3
}

model Kalender{
   id String @id @default(cuid())
   tgl_berita DateTime
   deskripsi_tanggal String
}
